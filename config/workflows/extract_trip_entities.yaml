version: "1"
name: extract_trip_entities
description: "Extracts structured product recommendations, itinerary, and safety info from a trip plan response"
enabled: true

inputs:
  - name: trip_plan_text
    type: string
    required: true
    description: "The full trip plan response from the trip planner agent"

triggers:
  - type: manual

steps:
  - name: extract_entities
    type: ai.agent
    with:
      agent_id: response-parser-agent
      message: "{{ inputs.trip_plan_text }}"
    on-failure:
      retry:
        max-attempts: 2
        delay: 1s

  - name: output_result
    type: console
    with:
      message: |
        Extracted entities from trip plan:
        {{ steps.extract_entities.output.response.message }}


